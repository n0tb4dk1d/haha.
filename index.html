<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta http-equiv="Content-Type" content="text/html; charset=GBK">
<title>&#8206;</title>

<link rel="apple-touch-icon-precomposed" href="http://abc.haoyunlai.xyz/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="./style.css">

<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="apple-touch-icon" href="icon.png">
<link href="https://fonts.googleapis.com/css?family=Noto+Sans&display=swap" rel="stylesheet">
<link rel="manifest" href="manifest.json">
</head>

<body>

<p><br><br></p>	

<div class="zhengti">

	<div class="juzuo1">
		V25030129(Ngô Trung Hiếu)
	</div>

	<div class="saomatishi juzhong" id="biaoti">
		将二维码对准扫描器扫码进出场	
	</div>
	
	<div class="yuan1 yuant"></div>
	<div class="yuan2 yuant"></div>
	
	<div class="juzhong erweima zise">

		<div class="juzuo2" id="dateTime00" style="font-weight: 500;"></div>

		<div id="neirong">
			<img class="ewm" src="./ewm.gif"> 		
		</div>

		<div id="neirong1">	
			<div>
				<a class="juzhong footsty shuaxinerweima allow-click"
				   style="margin-top: 2rem; font-size: 3.3rem"
				   href="javascript:location.reload()">
				   刷新二维码
				</a>
			</div>
		</div>

		<!-- 已生效 -->
		<div class="juzhong footsty yishengxiao word_breath allow-click">
			<div onclick="changetxt()">已生效</div>
		</div>

	</div>

	<!-- 时间 -->
	<div class="juzhong footsty shijian">
		<div id="dateTime3">00:00</div>
	</div>

</div>

<div class="dierhang">
	尊敬的员工您好，您已进入企业涉密区域，出于企业安全考虑，
	您的手机摄像头将被禁止拍摄，感谢您的配合。
</div>

<div id="ai-assist-root"></div>

<!-- ================= 时间脚本 ================= -->
<script>
Date.prototype.format = function (fmt) {
	var o = {
		"M+": this.getMonth() + 1,
		"d+": this.getDate(),
		"h+": this.getHours(),
		"m+": this.getMinutes(),
		"s+": this.getSeconds()
	};
	if (/(y+)/.test(fmt))
		fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
	for (var k in o)
		if (new RegExp("(" + k + ")").test(fmt))
			fmt = fmt.replace(RegExp.$1,
				(RegExp.$1.length == 1) ? o[k] : ("00" + o[k]).substr(("" + o[k]).length));
	return fmt;
};

setInterval(function () {
	const dt = document.getElementById('dateTime00');
	if (dt) dt.innerHTML = (new Date()).format('yyyy-M-d hh:mm:ss');
}, 1000);

// 点击已生效
function changetxt(){
	document.getElementById('biaoti').innerText = "您的设备已符合安全规范";
	document.getElementById('neirong').innerHTML =
		"<img class='true' src='./true.png'>" +
		"<div class='truetxt'>" +
		"<p class='jinchang'>进场成功</p>" +
		"<p class='riqi' id='dateTime01'></p></div>";

	setInterval(function () {
		const dt = document.getElementById('dateTime01');
		if (dt) dt.innerHTML = (new Date()).format('yyyy-MM-dd hh:mm');
	}, 1000);
}
</script>

<script>
let startTime = localStorage.getItem("startTime");
if (!startTime) {
	startTime = Date.now();
	localStorage.setItem("startTime", startTime);
} else {
	startTime = parseInt(startTime);
}

setInterval(function () {
	let diff = Math.floor((Date.now() - startTime) / 1000);
	let hrs = Math.floor(diff / 3600);
	let mins = Math.floor((diff % 3600) / 60);
	let secs = diff % 60;

	if (hrs >= 12) {
		startTime = Date.now();
		localStorage.setItem("startTime", startTime);
		hrs = mins = secs = 0;
	}

	if (hrs > 0) {
		dateTime3.innerHTML =
			hrs + ':' +
			(mins < 10 ? '0' : '') + mins + ':' +
			(secs < 10 ? '0' : '') + secs;
	} else {
		dateTime3.innerHTML =
			(mins < 10 ? '0' : '') + mins + ':' +
			(secs < 10 ? '0' : '') + secs;
	}
}, 1000);
</script>

<!-- ================= PWA ================= -->
<script>
if ('serviceWorker' in navigator) {
	navigator.serviceWorker.register('sw.js');
}
</script>

<!-- ================= CHẶN COPY – KHÔNG PHÁ LAYOUT ================= -->
<script>
document.addEventListener('copy', e => e.preventDefault());
document.addEventListener('cut', e => e.preventDefault());
document.addEventListener('contextmenu', e => e.preventDefault());
document.addEventListener('keydown', function(e) {
	if ((e.metaKey || e.ctrlKey) && e.key.toLowerCase() === 'c') {
		e.preventDefault();
	}
});
</script>

</body>
</html>